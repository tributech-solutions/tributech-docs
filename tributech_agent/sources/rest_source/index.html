<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-5.0.0 docs-doc-page docs-doc-id-tributech_agent/sources/rest_source" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">REST Source | Tributech Platform Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.tributech.io/img/favicon.png"><meta data-rh="true" name="twitter:image" content="https://docs.tributech.io/img/favicon.png"><meta data-rh="true" property="og:url" content="https://docs.tributech.io/tributech_agent/sources/rest_source"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="5.0.0"><meta data-rh="true" name="docusaurus_tag" content="docs-default-5.0.0"><meta data-rh="true" name="docsearch:version" content="5.0.0"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-5.0.0"><meta data-rh="true" property="og:title" content="REST Source | Tributech Platform Documentation"><meta data-rh="true" name="description" content="The Tributech Agent supports the integration of external data sources using REST with the  Tributech REST Source. The REST Source is configured via the Twin Configuration and is used to send data to the Tributech Agent via MQTT."><meta data-rh="true" property="og:description" content="The Tributech Agent supports the integration of external data sources using REST with the  Tributech REST Source. The REST Source is configured via the Twin Configuration and is used to send data to the Tributech Agent via MQTT."><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://docs.tributech.io/tributech_agent/sources/rest_source"><link data-rh="true" rel="alternate" href="https://docs.tributech.io/tributech_agent/sources/rest_source" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.tributech.io/tributech_agent/sources/rest_source" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://XQE3RIAUIB-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"REST Source","item":"https://docs.tributech.io/tributech_agent/sources/rest_source"}]}</script><link rel="search" type="application/opensearchdescription+xml" title="Tributech Platform Documentation" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.4544d67f.css">
<script src="/assets/js/runtime~main.8196dee5.js" defer="defer"></script>
<script src="/assets/js/main.d17578f3.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/favicon.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/favicon.png" alt="Tributech Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/favicon.png" alt="Tributech Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Tributech Documentation</b></a><a class="navbar__item navbar__link" href="/tributech_node/overview">Tributech Node</a><a class="navbar__item navbar__link" href="/tributech_agent/overview">Tributech Agent</a><a class="navbar__item navbar__link" href="/tributech_c_sdk/overview">Tributech C-SDK</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/tributech_agent/sources/rest_source">5.0.0</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/tributech_agent/sources/rest_source">5.0.0</a></li><li><a class="dropdown__link" href="/4.0.0/tributech_agent/sources/rest_source">4.0.0</a></li><li><a class="dropdown__link" href="/3.6.0/tributech_agent/sources/rest_source">3.6.0</a></li></ul></div><a href="https://github.com/tributech-solutions" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_x44X"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_dCNk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/tributech_node/overview">Tributech Node</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/tributech_agent/overview">Tributech Agent</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tributech_agent/overview">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tributech_agent/requirements">Requirements</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tributech_agent/quickstart">Quickstart</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tributech_agent/setup">Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tributech_agent/source_integration">Source Integration</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/tributech_agent/sources/mqtt_source">Tributech Sources</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/tributech_agent/sources/mqtt_source">MQTT Source</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/tributech_agent/sources/ads_source">ADS Source</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/tributech_agent/sources/opcua_source">OPC-UA Source</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/tributech_agent/sources/simulated_source">Simulated Source</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/tributech_agent/sources/rest_source">REST Source</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/tributech_c_sdk/overview">Tributech C-SDK</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Tributech Agent</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Tributech Sources</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">REST Source</span></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 5.0.0</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>REST Source</h1></header><p>The Tributech Agent supports the integration of external data sources using <a href="https://learn.microsoft.com/en-us/azure/architecture/best-practices/api-design#what-is-rest" target="_blank" rel="noopener noreferrer">REST</a> with the  Tributech REST Source. The REST Source is configured via the Twin Configuration and is used to send data to the Tributech Agent via <a href="https://mqtt.org/" target="_blank" rel="noopener noreferrer">MQTT</a>.
The data can be send to the Tributech Source either via <a href="https://swagger.io/specification/" target="_blank" rel="noopener noreferrer">Swagger</a> or with our <a href="#mockclient">Tributech REST MockClient</a>.</p>
<p>We currently support two types of data format for the REST Source:</p>
<ul>
<li><strong>REST Pre-defined Payload</strong>: Data will be provided in a pre-defined format containing a unique combination of
MachineId and SensorId to identify the DataStreamId of the Twin Configuration (see <a href="#rest-endpointswagger">Swagger</a> for details)</li>
<li><strong>REST Stream</strong>: Data will be provided with the DataStreamId of the Twin Configuration contained in the data (see
<a href="#rest-endpointswagger">Swagger</a> for details)</li>
</ul>
<p>We will show in <a href="#configuration">Configuration</a> how to configure the REST Source to accept data for each specific stream type and provide the examples for <a href="#rest-endpointswagger">Swagger</a> or the <a href="#mockclient">REST MockClient</a>.</p>
<p>The Source will return a status code <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status" target="_blank" rel="noopener noreferrer">200 OK</a> if the data was successfully received and is queued to be published to the Tributech Agent. The status code does not indicate that the data was successfully transferred to the Tributech Agent or Tributech Node. Queueing the data to be published means that the Source received the data and publishes the data after applying options contained by the Twin configuration if defined, e.g. <a href="#value-change-options">ValueChangeOptions</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="setup">Setup<a href="#setup" class="hash-link" aria-label="Direct link to Setup" title="Direct link to Setup">​</a></h2>
<p>The Tributech REST Source image can be started without any dependencies but will not be functional without a valid Twin Configuration or MessageBroker connect to the Tributech Agent. The TwinConfiguration can be provided via the Tributech Node (recommended) or MessageBroker (see <a href="/tributech_agent/source_integration#twin-model">Source Integration</a>). The REST Source will automatically connect to the Tributech Agent if the Tributech Agent is running and correct MessageBroker settings are set.</p>
<p>In the following part we will describe the setup of a Tributech REST Source.</p>
<ul>
<li>Setup the <em><strong>docker-compose.yml</strong></em> file by creating a <code>docker-compose.yml</code> file with the following content (adjustments required):</li>
</ul>
<div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">docker-compose.yml</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;3.6&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">services</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">source-rest</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">DOCKER_REGISTRY</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">tributech.azurecr.io/</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">tributech</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">source</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">rest</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">$</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">SOURCE_TAG</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">depends_on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> mosquitto</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> tributech</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">agent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> MqttOptions__MQTTHost=mosquitto</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> Logging__LogLevel__Default=Debug</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;5080:8080&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> rest</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">net</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">restart</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> unless</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">stopped</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">logging</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">driver</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;json-file&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">options</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">max-size</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2m&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">max-file</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;5&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">tributech-agent</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">DOCKER_REGISTRY</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">tributech.azurecr.io/</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">tributech</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">agent</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">$</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">AGENT_TAG</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">depends_on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> mosquitto</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> Logging__LogLevel__Default=Debug</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> Logging__Console__FormatterName=simple</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> MqttOptions__MQTTHost=mosquitto</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> EdgeDeviceOptions__AgentID=$</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">AGENT_ID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">?</span><span class="token plain">&quot;The Tributech Agent requires a GUID&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> EdgeDeviceOptions__NodeUrl=$</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">NODE_URL</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">?</span><span class="token plain">&quot;The Tributech Node Url is required&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> EnrollmentOptions__EnrollmentCertBase64=$</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">ENROLLMENT_CERT_BASE64</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">?</span><span class="token plain">&quot;The base64 encoded Enrollment Cert is required&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> EnrollmentOptions__EnrollmentKeyBase64=$</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">ENROLLMENT_KEY_BASE64</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">?</span><span class="token plain">&quot;The base64 encoded Enrollment Key is required&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> rest</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">net</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;5000:8080&quot;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># enable access to agent REST-API (e.g. for configuration with Agent-Companion)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ./volumes/rest/agent/</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/app/data </span><span class="token comment" style="color:#999988;font-style:italic"># volume mapping for permanent storage of keys and datatwin file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">restart</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> unless</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">stopped</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">logging</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">driver</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;json-file&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">options</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">max-size</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2m&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">max-file</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;5&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">mosquitto-server</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> eclipse</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">mosquitto</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">$</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">MQTT_TAG</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">-1.6</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> rest</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">net</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># ports:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># - &#x27;1883:1883&#x27; # MQTT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># - &quot;127.0.0.1:9001:9001&quot; # web-socket</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">restart</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> unless</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">stopped</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">networks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  rest</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">net</span><span class="token punctuation" style="color:#393A34">:</span><br></span></code></pre></div></div>
<p>Adjust the setting for the <a href="/tributech_agent/overview">Tribtech Agent</a> to your environment, sample value:</p>
<div class="language-plain codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">env specific settings</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plain codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tributech-agent:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    environment:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - EdgeDeviceOptions__AgentID=00000000-0000-0000-0000-000000000007</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - EdgeDeviceOptions__NodeUrl=https://my-environment.tributech-node.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - EnrollmentOptions__EnrollmentCertBase64=LS0tLS1C...ZDdqb29rcUV</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - EnrollmentOptions__EnrollmentKeyBase64=AKS0tLS1C...ZDdqb29rcDE</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuration">Configuration<a href="#configuration" class="hash-link" aria-label="Direct link to Configuration" title="Direct link to Configuration">​</a></h2>
<p>After setting up the Tributech REST Source we need to activate it in the Tributech Node (see <a href="/tributech_node/agent/agent_management#activate-agent">Agent Management</a>) and configure the TwinConfiguration. For both Streams we need first to create a new Source in the Tributech Node and then add the Streams to the Source. The following sections will show how to create a new Source and add the Streams to the Source. One Source can include multiple Streams of both types.</p>
<p><img decoding="async" loading="lazy" alt="&amp;quot;Add REST Stream" src="/assets/images/node-source-rest-add-7ada1a7aaad1cc931092486498e7ee59.png" width="771" height="570" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="rest-stream">REST Stream<a href="#rest-stream" class="hash-link" aria-label="Direct link to REST Stream" title="Direct link to REST Stream">​</a></h3>
<p>At first we add the REST Stream to our newly created Tributech REST Source. The REST Stream will be used to send data to the Tributech Node based on an unique identifier contained in the json payload. The REST Stream can be added by right clicking the REST Source and selecting <em><strong>Add Streams</strong></em>. The following dialog will appear:</p>
<p><img decoding="async" loading="lazy" alt="&amp;quot;Add Stream Stream" src="/assets/images/node-source-rest-add-stream-stream-d8f520644abe74e3fa4af9ba03bba378.png" width="666" height="567" class="img_ev3q"></p>
<p>After adding the REST Stream we configure the Data Encoding (in <code>red</code>) and save the changes by clicking on the <code>SAVE IN WORKSPACE</code> button in the bottom right corner. The REST Stream is now configured but can be only be used to send data to the REST Source after submitting the changes to the Tributech Source via <code>APPLY CONFIGURATION</code>. The REST Stream will only accept data that contains the DataStreamId of the REST Stream. The DataStreamId can be found on the top of the REST Stream configuration (in <code>green</code>):</p>
<p><img decoding="async" loading="lazy" alt="&amp;quot;Add Stream Stream" src="/assets/images/node-source-rest-add-stream-stream-config-9d0d181b97879e254b89b7456e304ff4.png" width="2553" height="1036" class="img_ev3q"></p>
<p>After we have configured the REST Source we can apply the configuration to the Tributech Agent by clicking on the <code>APPLY CONFIGURATION</code> button in the top right corner.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="pre-defined-payload-stream">Pre-defined Payload Stream<a href="#pre-defined-payload-stream" class="hash-link" aria-label="Direct link to Pre-defined Payload Stream" title="Direct link to Pre-defined Payload Stream">​</a></h3>
<p>In contrast to a generated identifier of the REST Stream we can now define a two string&#x27;s used to identify the DataStreamId for the REST Source. The pre-defined payload will be added by right clicking the REST Source and selecting <em><strong>Add Streams</strong></em>. The following dialog will appear:</p>
<p><img decoding="async" loading="lazy" alt="&amp;quot;Add Pre-defined Payload Stream" src="/assets/images/node-source-rest-add-stream-payload-a2ddbd7fbd64ab9b4bfe79f82985da44.png" width="666" height="567" class="img_ev3q"></p>
<p>After adding the REST Stream we configured the Data Encoding, one or both of the identifiers (Source/Value) and save the changes by clicking on the <code>SAVE IN WORKSPACE</code> button in the bottom right corner.
The Source Identifier and Value Identifier will be used to uniquely match data to the DataStreamId (not contained in payload).</p>
<p><img decoding="async" loading="lazy" alt="&amp;quot;Add Pre-defined Payload Stream" src="/assets/images/node-source-rest-add-stream-payload-config-e67e8a516da0d68da2029bb81224b8d5.png" width="2545" height="1217" class="img_ev3q"></p>
<p>After we have configured the REST Source we can apply the configuration to the Tributech Agent by clicking on the <code>APPLY CONFIGURATION</code> button in the top right corner. The REST Stream is now configured and can be used to send data to the REST Source. The REST Stream will only accept data that contains the same combination of <code>source identifier</code> and <code>value identifier</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="value-change-options">Value Change Options<a href="#value-change-options" class="hash-link" aria-label="Direct link to Value Change Options" title="Direct link to Value Change Options">​</a></h3>
<p>The basic handling of Value Change Options (VCO) can be found in <a href="/tributech_agent/source_integration">Source Integration</a>. This section contains the concrete handling of the <em><strong>Step (Delta)</strong></em> for the simulated source. The following list contains the description for each supported <em><strong>Stream Data Encoding</strong></em> where <em><strong>X</strong></em> represents the value for <em><strong>Step (Delta)</strong></em>:</p>
<ul>
<li><em><strong>Double</strong></em>, <em><strong>Int32</strong></em>, <em><strong>Long</strong></em>, <em><strong>Float</strong></em>: defines the minimum difference between values to be submitted, the change is always compared to the last successful submitted value, e.g. if <em><strong>X</strong></em>= 3 if the double values 1, 2, 5, 8, 10, 11, 14 are received by the Tributech Source only 1, 5, 8, 11, 14 will be submitted.</li>
<li><em><strong>Byte Array</strong></em>: will only be submitted if the current and last submitted value are not equal</li>
<li><em><strong>String UTF 8</strong></em>: will only be submitted if the current and last submitted value are not equal</li>
<li><em><strong>Boolean</strong></em>: will only be submitted if the current and last submitted value are not equal</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="providing-data">Providing Data<a href="#providing-data" class="hash-link" aria-label="Direct link to Providing Data" title="Direct link to Providing Data">​</a></h2>
<p>In the following section we want to outline two different ways to provide data to the REST Source. The first way is to use the Swagger UI to send data and the second way is to use the Tributech REST MockClient to send data to the REST Source. The following sections will show how to send data to the REST Source for each type of Stream.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="rest-endpointswagger">REST Endpoint/Swagger<a href="#rest-endpointswagger" class="hash-link" aria-label="Direct link to REST Endpoint/Swagger" title="Direct link to REST Endpoint/Swagger">​</a></h3>
<p>The REST Source provides a Swagger UI to send data to the REST Source. The Swagger UI can be accessed via the following url: <code>http://&lt;host&gt;:5080/swagger/index.html</code>. There are different endpoints available for each type of Stream and type of data (encoding provided values based on  <a href="https://docs.microsoft.com/en-us/dotnet/api/system.bitconverter?view=net-5.0" target="_blank" rel="noopener noreferrer"><strong>.NET Framework BitConverter</strong></a>).</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="rest-stream-1">REST Stream<a href="#rest-stream-1" class="hash-link" aria-label="Direct link to REST Stream" title="Direct link to REST Stream">​</a></h4>
<p>The data for the REST Stream needs to be submitted in the Endpoint Group <code>Stream</code> and contain the DataStreamId (previously marked <code>green</code> in the <a href="#rest-stream">configuration section</a>) of the REST Stream. The Swagger UI will only accept data that contains the same DataStreamId in the json payload as defined in the TwinConfiguration for a REST Stream.
Examples on how to submit data to the REST Source can be found in the Swagger UI under <strong>Stream</strong> directly, e.g. double stream:</p>
<p><img decoding="async" loading="lazy" alt="&amp;quot;Stream Double Example" src="/assets/images/source-rest-stream-double-a10e7bf5ac0dd278799b74b671c59910.png" width="1447" height="634" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="rest-pre-defined-payload">REST Pre-defined Payload<a href="#rest-pre-defined-payload" class="hash-link" aria-label="Direct link to REST Pre-defined Payload" title="Direct link to REST Pre-defined Payload">​</a></h4>
<p>The data for the Pre-defined Payload Stream needs to be submitted in the Endpoint Group <code>Pre-defined Payload</code> and contain the same identifier combination as the TwinConfiguration (Set the previously, in the <a href="#pre-defined-payload-stream">configuration section</a>, i.e. defined <code>source identifier</code> value as <code>MachineId</code> and <code>value identifier</code> as <code>SensorId</code> of the json payload).
Examples on how to submit data to the REST Source can be found in the Swagger UI under <strong>Pre-defined Payload</strong> directly, e.g. double stream:</p>
<p><img decoding="async" loading="lazy" alt="&amp;quot;Stream Double Example" src="/assets/images/source-rest-stream-payload-double-98e136cf8a9a11e74ccd7aee015c20ac.png" width="1444" height="513" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="mockclient">MockClient<a href="#mockclient" class="hash-link" aria-label="Direct link to MockClient" title="Direct link to MockClient">​</a></h3>
<p>We provide an additional <code>docker-compose.override.yml</code> to include a MockClient that can send data directly to the REST Source based on the settings of the environment variables. The MockClient is only for testing purposes and should not be used in production. The MockClient is configured via the <code>docker-compose.override.yml</code> file and needs to be in the same folder as the <code>docker-compose.yml</code> on docker-compose up. The following example shows how to setup the MockClient to send data to the REST Source for a stream double stream, the <em><strong>placeholder need to be replaced</strong></em> before starting the MockClient:</p>
<div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">docker-compose.override.yml</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;3.6&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">services</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">source-rest-mock-client</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">DOCKER_REGISTRY</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">tributech.azurecr.io/</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">tributech</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">source</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">rest</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">mockclient</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">$</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">SOURCE_TAG</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">depends_on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> mosquitto</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">server</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">rest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> tributech</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">agent</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">rest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> source</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">rest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> MqttOptions__MQTTHost=mosquitto</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">server</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">rest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> Logging__LogLevel__Default=Debug</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> MockOptions__ApiUrl=http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//source</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">rest</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">8080</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> MockOptions__HttpPostTimeout=00</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">00</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">05.000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># Stream</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> MockOptions__Streams__0__StreamEncoding=3 </span><span class="token comment" style="color:#999988;font-style:italic"># double</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> MockOptions__Streams__0__StreamId=&lt;stream</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- replace with stream id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> MockOptions__Streams__0__Interval=00</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">00</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">01.000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># Payload Stream</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> MockOptions__Streams__1__StreamEncoding=3 </span><span class="token comment" style="color:#999988;font-style:italic"># double</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> MockOptions__Streams__1__MachineId=&lt;SourceIdentifier</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- replace with source id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> MockOptions__Streams__1__SensorId=&lt;ValueIdentifier</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;-- replace with value id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> MockOptions__Streams__1__Interval=00</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">00</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">01.000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> rest</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">net</span><br></span></code></pre></div></div>
<p>After starting our MockClient we need to go back to the configuration tap in the Tributech Node and apply the Tributech REST Source configuration again to be able to see the generated data. For this just click on the <code>APPLY CONFIGURATION</code> button in the configuration window.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="modify-docker-composeoverrideyml">Modify docker-compose.override.yml<a href="#modify-docker-composeoverrideyml" class="hash-link" aria-label="Direct link to Modify docker-compose.override.yml" title="Direct link to Modify docker-compose.override.yml">​</a></h4>
<p>We can adjust the data generation to our needs by modifying the docker-compose.override.yml file, see <a href="https://docs.docker.com/compose/" target="_blank" rel="noopener noreferrer">Docker</a> for details on how to setup the environment for docker-compose.</p>
<p>We can send different datatypes to specified streams and modify the following <code>environment</code> variables to change the stream generation behaviour:</p>
<ul>
<li>
<p><strong>StreamEncoding</strong>: Sets the datatype which will be generated based on a numeric value:</p>
<table><thead><tr><th>Value</th><th>Datatype</th></tr></thead><tbody><tr><td>1</td><td>byte-array</td></tr><tr><td>2</td><td>float</td></tr><tr><td>3</td><td>double</td></tr><tr><td>4</td><td>int</td></tr><tr><td>5</td><td>long</td></tr><tr><td>6</td><td>string_utf8</td></tr><tr><td>8</td><td>boolean</td></tr></tbody></table>
</li>
<li>
<p><strong>Interval</strong>: The interval in which the values are generated (in TimeSpan format, e.g. 00:00:05 for 5 seconds, see <a href="https://learn.microsoft.com/en-us/dotnet/standard/base-types/standard-timespan-format-strings" target="_blank" rel="noopener noreferrer">Microsoft</a>)</p>
</li>
<li>
<p><strong>MinValue</strong> (default -1000): The minimum value that can be generated (for bytearrays and string this is the length of the array/string, default 1)</p>
</li>
<li>
<p><strong>MaxValue</strong> (default 1000): The max value that can be generated (for bytearrays and string this is the length of the array/string)</p>
</li>
</ul>
<p>In Order to add more streams the environment &#x27;MockOptions&#x27; setting can be adjusted based on the AppSettings.json configuration capabilities, see <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/configuration/?view=aspnetcore-7.0" target="_blank" rel="noopener noreferrer">Microsoft</a> for details on how to setup the environment variables.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="fixed-streams">Fixed Streams<a href="#fixed-streams" class="hash-link" aria-label="Direct link to Fixed Streams" title="Direct link to Fixed Streams">​</a></h3>
<p>Fixed Streams require at least a StreamId and a StreamEncoding. The Stream Id is a Guid which represents the StreamId of
the Twin Configuration. If the StreamId is not present in the Twin Configuration, the Fixed Stream data will be rejected
by the REST endpoint.</p>
<p>The following example shows minimal configuration for a Fixed Stream for the rest-source-mock-client service:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> MockOptions__ApiUrl=http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//rest</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">source</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">8080</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> MockOptions__Streams__0__StreamEncoding=3 </span><span class="token comment" style="color:#999988;font-style:italic"># double</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> MockOptions__Streams__0__StreamId=cf464c2a</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">929f</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">4ed2</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">8917</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">30a4ee2edaaa</span><br></span></code></pre></div></div>
<p>This example above send per default every 10sec a value between -1000 and 1000 to the REST Source Stream with the StreamId <code>cf464c2a-929f-4ed2-8917-30a4ee2edaaa</code>.</p>
<p><img decoding="async" loading="lazy" alt="&amp;quot;Stream Graph Example" src="/assets/images/node-source-rest-graph-stream-2fb9b53c3b34b83c51cf3e99df88ec87.png" width="1739" height="796" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="payload-streams">Payload Streams<a href="#payload-streams" class="hash-link" aria-label="Direct link to Payload Streams" title="Direct link to Payload Streams">​</a></h3>
<p>Payload Streams require at least a MachineId or a SensorId and a StreamEncoding. The provided MachineId and SensorId
combination must be defined the same way in the REST source Twin Configuration.</p>
<p>The following example shows minimal configuration for a Fixed Stream for the rest-source-mock-client service:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> MockOptions__ApiUrl=http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//rest</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">source</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">8080</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> MockOptions__Streams__0__StreamEncoding=3 </span><span class="token comment" style="color:#999988;font-style:italic"># double</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> MockOptions__Streams__0__MachineId=double</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> MockOptions__Streams__0__SensorId=xxo</span><br></span></code></pre></div></div>
<p>The appropriate REST endpoint is called based on the StreamEncoding. If the defined StreamId is not present in the Twin Configuration, the data will be rejected by the REST Source.</p>
<p><img decoding="async" loading="lazy" alt="&amp;quot;Stream Pre-defined payload Graph Example" src="/assets/images/node-source-rest-graph-payload-84d88a3389f23211da9b45a9f06104e0.png" width="1724" height="786" class="img_ev3q"></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/tributech-solutions/tributech-dsk-docs/edit/master/versioned_docs/version-5.0.0/tributech_agent/sources/rest_source.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/tributech_agent/sources/simulated_source"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Simulated Source</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/tributech_c_sdk/overview"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Overview</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#setup" class="table-of-contents__link toc-highlight">Setup</a></li><li><a href="#configuration" class="table-of-contents__link toc-highlight">Configuration</a><ul><li><a href="#rest-stream" class="table-of-contents__link toc-highlight">REST Stream</a></li><li><a href="#pre-defined-payload-stream" class="table-of-contents__link toc-highlight">Pre-defined Payload Stream</a></li><li><a href="#value-change-options" class="table-of-contents__link toc-highlight">Value Change Options</a></li></ul></li><li><a href="#providing-data" class="table-of-contents__link toc-highlight">Providing Data</a><ul><li><a href="#rest-endpointswagger" class="table-of-contents__link toc-highlight">REST Endpoint/Swagger</a></li><li><a href="#mockclient" class="table-of-contents__link toc-highlight">MockClient</a></li><li><a href="#fixed-streams" class="table-of-contents__link toc-highlight">Fixed Streams</a></li><li><a href="#payload-streams" class="table-of-contents__link toc-highlight">Payload Streams</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.facebook.com/tributech.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/tributechsolutions" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.tributech.io/blog" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/tributech-solutions" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2018 - 2025 Tributech Solutions GmbH</div></div></div></footer></div>
</body>
</html>